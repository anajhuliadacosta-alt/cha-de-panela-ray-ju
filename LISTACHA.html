<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lista de Presentes - Chá de Panela</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{--bg:#f5f5f7;--card:#fff;--accent:#6c5ce7;--accent-2:#5849c2;--muted:#636e72}
    *{box-sizing:border-box}
    body {
        font-family: 'Inter', system-ui, Arial, sans-serif;
        background: var(--bg);
        margin: 0;
        padding: 24px;
        color: #222;
    }

    header{max-width:1100px;margin:0 auto 20px;display:flex;align-items:center;justify-content:space-between;gap:16px}
    h1{font-size:1.4rem;margin:0;color:#111}

    .container{max-width:1100px;margin:0 auto}

    .card{background:var(--card);padding:16px;border-radius:12px;box-shadow:0 6px 18px rgba(15,15,15,0.06);margin-bottom:18px}

    .admin-row{display:flex;gap:8px;align-items:center}
    input[type=password], input[type=text], select, input[type=file]{padding:10px;border-radius:10px;border:1px solid #e4e4e7;font-size:14px}
    button{background:var(--accent);border:none;color:#fff;padding:10px 14px;border-radius:10px;cursor:pointer}
    button.secondary{background:#efefef;color:#333}

    .layout{display:grid;grid-template-columns:1fr;gap:18px}

    .controls{display:flex;gap:10px;flex-wrap:wrap}

    .gift-container{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:14px}
    .gift{background:var(--card);padding:12px;border-radius:12px;display:flex;gap:12px;align-items:center;box-shadow:0 4px 12px rgba(10,10,10,0.04)}
    .gift img{width:64px;height:64px;border-radius:8px;object-fit:cover;background:#f0f0f0}
    .gift .meta{flex:1}
    .gift h3{margin:0;font-size:1rem}
    .gift p{margin:6px 0 0;color:var(--muted);font-size:0.9rem}
    .reserved{font-weight:600;color:var(--muted)}

    @media (min-width:900px){.layout{grid-template-columns:320px 1fr}}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>Lista de Presentes - Chá de Panela</h1>
      <div id="admin-info" class="admin-row"></div>
    </header>

    <!-- Login Card -->
    <div id="login-card" class="card">
      <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap">
        <div>
          <h2 style="margin:0 0 6px 0;font-size:1rem">Área Administrativa</h2>
          <div style="color:var(--muted);font-size:0.95rem">Faça login para gerenciar itens e ver quem reservou.</div>
        </div>
        <div style="display:flex;gap:8px;align-items:center">
          <input id="admin-pass" type="password" placeholder="Senha do admin" />
          <button onclick="loginAdmin()">Entrar</button>
          <button class="secondary" onclick="logoutAdmin()" id="btn-logout" style="display:none">Sair</button>
        </div>
      </div>
    </div>

    <div class="layout">
      <!-- Admin panel (shows after login) -->
      <div id="admin-panel" class="card" style="display:none">
        <h3 style="margin-top:0">Adicionar Presente</h3>
        <div style="display:flex;flex-direction:column;gap:8px">
          <input type="text" id="item-name" placeholder="Nome do presente" />
          <select id="item-category">
            <option value="Cozinha">Cozinha</option>
            <option value="Mesa e Banho">Mesa e Banho</option>
            <option value="Decoração">Decoração</option>
            <option value="Limpeza">Limpeza</option>
            <option value="Outros">Outros</option>
          </select>
          <input type="file" id="item-image" accept="image/*" />
          <div style="display:flex;gap:8px">
            <button onclick="addGift()">Adicionar</button>
            <button class="secondary" onclick="clearAll()">Limpar tudo</button>
          </div>
        </div>
      </div>

      <!-- List & filters -->
      <div>
        <div class="card" style="display:flex;align-items:center;justify-content:space-between;gap:12px">
          <div style="display:flex;gap:8px;align-items:center">
            <label for="filter-category" style="color:var(--muted)">Filtrar:</label>
            <select id="filter-category" onchange="renderGifts()">
              <option value="all">Todas as categorias</option>
              <option value="Cozinha">Cozinha</option>
              <option value="Mesa e Banho">Mesa e Banho</option>
              <option value="Decoração">Decoração</option>
              <option value="Limpeza">Limpeza</option>
              <option value="Outros">Outros</option>
            </select>
          </div>
          <div style="color:var(--muted);font-size:0.95rem">Visível para convidados: reservar. Visível para admin: ver nome do reservante.</div>
        </div>

        <div id="gift-list-card" class="card" style="margin-top:12px">
          <div class="gift-container" id="giftList"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // --- Config ---
    const ADMIN_PASSWORD = '1234'; // altere se quiser

    let isAdmin = false;

    // Preloaded items
    const PRELOADED = [
      { id: 1, name: "Pratos orgânicos", category: "Cozinha", imgURL: "", reservedBy: null },
      { id: 2, name: "Suggar", category: "Cozinha", imgURL: "", reservedBy: null },
      { id: 3, name: "Airfryer", category: "Cozinha", imgURL: "", reservedBy: null },
      { id: 4, name: "Liquidificador", category: "Cozinha", imgURL: "", reservedBy: null },
      { id: 5, name: "Panela elétrica", category: "Cozinha", imgURL: "", reservedBy: null },
      { id: 6, name: "Microondas", category: "Cozinha", imgURL: "", reservedBy: null },
      { id: 7, name: "Panela de pressão elétrica", category: "Cozinha", imgURL: "", reservedBy: null },
      { id: 8, name: "Conjunto de panelas", category: "Cozinha", imgURL: "", reservedBy: null },
      { id: 9, name: "Panela de pressão", category: "Cozinha", imgURL: "", reservedBy: null },
      { id: 10, name: "Frigideira antiaderente", category: "Cozinha", imgURL: "", reservedBy: null },
      { id: 11, name: "Assadeiras (vidro, alumínio e cerâmica)", category: "Cozinha", imgURL: "", reservedBy: null },
      { id: 12, name: "Jogo de talheres", category: "Cozinha", imgURL: "", reservedBy: null },
      { id: 13, name: "Conjunto de facas", category: "Cozinha", imgURL: "", reservedBy: null },
      { id: 14, name: "Escorredor de macarrão", category: "Cozinha", imgURL: "", reservedBy: null },
      { id: 15, name: "Espremedor de alho", category: "Cozinha", imgURL: "", reservedBy: null },
      { id: 16, name: "Espremedor de limão", category: "Cozinha", imgURL: "", reservedBy: null },
      { id: 17, name: "Triturador", category: "Cozinha", imgURL: "", reservedBy: null },
      { id: 18, name: "Pegador de salada", category: "Cozinha", imgURL: "", reservedBy: null },
      { id: 19, name: "Colheres de pau ou silicone", category: "Cozinha", imgURL: "", reservedBy: null },
      { id: 20, name: "Concha, espátula e escumadeira", category: "Cozinha", imgURL: "", reservedBy: null },
      { id: 21, name: "Ralador", category: "Cozinha", imgURL: "", reservedBy: null },
      { id: 22, name: "Medidores (colheres e xícaras)", category: "Cozinha", imgURL: "", reservedBy: null },
      { id: 23, name: "Potes plásticos ou de vidro com tampa", category: "Cozinha", imgURL: "", reservedBy: null },
      { id: 24, name: "Potes de vidro para colocar macarrão/arroz/feijão e etc", category: "Cozinha", imgURL: "", reservedBy: null },
      { id: 25, name: "Saleiro e pimenteiro", category: "Cozinha", imgURL: "", reservedBy: null },
      { id: 26, name: "Açucareiro", category: "Cozinha", imgURL: "", reservedBy: null },
      { id: 27, name: "Manteigueira", category: "Cozinha", imgURL: "", reservedBy: null },
      { id: 28, name: "Leiteira", category: "Cozinha", imgURL: "", reservedBy: null },
      { id: 29, name: "Forma de bolo", category: "Cozinha", imgURL: "", reservedBy: null },
      { id: 30, name: "Jogo de pratos (rasos, fundos e de sobremesa)", category: "Mesa e Banho", imgURL: "", reservedBy: null },
      { id: 31, name: "Jogo de copos", category: "Mesa e Banho", imgURL: "", reservedBy: null },
      { id: 32, name: "Jogo de taças (vinho, suco, etc.)", category: "Mesa e Banho", imgURL: "", reservedBy: null },
      { id: 33, name: "Jogo de xícaras de café ou chá", category: "Mesa e Banho", imgURL: "", reservedBy: null },
      { id: 34, name: "Jarra de suco", category: "Mesa e Banho", imgURL: "", reservedBy: null },
      { id: 35, name: "Travessas (vidro, inox ou porcelana)", category: "Mesa e Banho", imgURL: "", reservedBy: null },
      { id: 36, name: "Suporte para bolo ou doces", category: "Mesa e Banho", imgURL: "", reservedBy: null },
      { id: 37, name: "Porta-guardanapo", category: "Mesa e Banho", imgURL: "", reservedBy: null },
      { id: 38, name: "Porta-copos", category: "Mesa e Banho", imgURL: "", reservedBy: null },
      { id: 39, name: "Bandeja", category: "Mesa e Banho", imgURL: "", reservedBy: null },
      { id: 40, name: "Pá de lixo", category: "Limpeza", imgURL: "", reservedBy: null },
      { id: 41, name: "Vassoura", category: "Limpeza", imgURL: "", reservedBy: null },
      { id: 42, name: "Rodo", category: "Limpeza", imgURL: "", reservedBy: null },
      { id: 43, name: "MOP ou esfregão", category: "Limpeza", imgURL: "", reservedBy: null },
      { id: 44, name: "Escova de roupa", category: "Limpeza", imgURL: "", reservedBy: null },
      { id: 45, name: "Pregadores de roupa", category: "Limpeza", imgURL: "", reservedBy: null },
      { id: 46, name: "Cesto de roupas", category: "Limpeza", imgURL: "", reservedBy: null },
      { id: 47, name: "Ferro de passar", category: "Limpeza", imgURL: "", reservedBy: null },
      { id: 48, name: "Suporte para sabão e detergente", category: "Limpeza", imgURL: "", reservedBy: null },
      { id: 49, name: "Lixeira de pia", category: "Limpeza", imgURL: "", reservedBy: null },
      { id: 50, name: "Lixeira de chão", category: "Limpeza", imgURL: "", reservedBy: null },
      { id: 51, name: "Pano de prato", category: "Limpeza", imgURL: "", reservedBy: null },
      { id: 52, name: "Pano de chão", category: "Limpeza", imgURL: "", reservedBy: null },
      { id: 53, name: "Porta-chaves", category: "Decoração", imgURL: "", reservedBy: null },
      { id: 54, name: "Espelhos (banheiro e sala)", category: "Decoração", imgURL: "", reservedBy: null },
      { id: 55, name: "Espelho de corpo inteiro", category: "Decoração", imgURL: "", reservedBy: null },
      { id: 56, name: "Quadros decorativos", category: "Decoração", imgURL: "", reservedBy: null },
      { id: 57, name: "Vasos com flores ou plantas artificiais", category: "Decoração", imgURL: "", reservedBy: null },
      { id: 58, name: "Porta-controle remoto", category: "Decoração", imgURL: "", reservedBy: null },
      { id: 59, name: "Cafeteira", category: "Cozinha", imgURL: "", reservedBy: null },
      { id: 60, name: "Garrafa térmica", category: "Cozinha", imgURL: "", reservedBy: null },
      { id: 61, name: "Sanduicheira", category: "Cozinha", imgURL: "", reservedBy: null },
      { id: 62, name: "Mixer ou processador", category: "Cozinha", imgURL: "", reservedBy: null },
      { id: 63, name: "Cabeceira", category: "Decoração", imgURL: "", reservedBy: null },
      { id: 64, name: "Toalha de mesa", category: "Mesa e Banho", imgURL: "", reservedBy: null },
      { id: 65, name: "Pano de chão", category: "Limpeza", imgURL: "", reservedBy: null },
      { id: 66, name: "Jogo de banheiro (tapete etc)", category: "Mesa e Banho", imgURL: "", reservedBy: null },
      { id: 67, name: "Armário cozinha (consultar as noivas)", category: "Cozinha", imgURL: "", reservedBy: null },
      { id: 68, name: "Tapete banheiro (kit)", category: "Mesa e Banho", imgURL: "", reservedBy: null },
      { id: 69, name: "Tapete quarto e sala", category: "Decoração", imgURL: "", reservedBy: null },
      { id: 70, name: "Conjunto de frigideira antiaderente", category: "Cozinha", imgURL: "", reservedBy: null }
    ];

    // Load from localStorage if exists, otherwise use PRELOADED
    let gifts = [];
    try{
      const saved = localStorage.getItem('gifts-cha-panela');
      gifts = saved ? JSON.parse(saved) : PRELOADED.slice();
    }catch(e){
      gifts = PRELOADED.slice();
      console.error('Erro ao carregar gifts:', e);
    }

    // Render initial list
    renderGifts();

    // --- Functions ---
    function saveAndRender(){
      localStorage.setItem('gifts-cha-panela', JSON.stringify(gifts));
      renderGifts();
    }

    function addGift(){
      const name = document.getElementById('item-name').value.trim();
      const category = document.getElementById('item-category').value;
      const file = document.getElementById('item-image').files[0];

      if(!name){ alert('Digite o nome do presente'); return; }

      if(file){
        const reader = new FileReader();
        reader.onload = function(e){
          const imgURL = e.target.result;
          const newGift = { id: Date.now(), name, category, imgURL, reservedBy: null };
          gifts.push(newGift);
          saveAndRender();
          document.getElementById('item-name').value = '';
          document.getElementById('item-image').value = '';
        };
        reader.readAsDataURL(file);
      } else {
        const newGift = { id: Date.now(), name, category, imgURL: '', reservedBy: null };
        gifts.push(newGift);
        saveAndRender();
        document.getElementById('item-name').value = '';
      }
    }

    function reserveGift(id, input){
      const gift = gifts.find(g=>g.id===id);
      if(!gift) return;
      const name = input.value.trim();
      if(!name) return;
      gift.reservedBy = name;
      saveAndRender();
    }

    function filterMatches(g){
      const filter = document.getElementById('filter-category')?.value || 'all';
      return filter === 'all' || g.category === filter;
    }

    function renderGifts(){
      const container = document.getElementById('giftList');
      container.innerHTML = '';

      gifts.filter(filterMatches).forEach(gift => {
        const el = document.createElement('div');
        el.className = 'gift';

        const img = document.createElement('img');
        img.src = gift.imgURL || 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64"><rect width="100%" height="100%" fill="%23f0f0f0"/></svg>';

        const meta = document.createElement('div');
        meta.className = 'meta';
        const title = document.createElement('h3');
        title.textContent = gift.name;
        const cat = document.createElement('p');
        cat.textContent = gift.category;

        meta.appendChild(title);
        meta.appendChild(cat);

        const right = document.createElement('div');

        if(gift.reservedBy){
          const p = document.createElement('p');
          p.className = 'reserved';
          p.textContent = isAdmin ? `Reservado por: ${gift.reservedBy}` : 'Reservado';
          right.appendChild(p);
        } else {
          const input = document.createElement('input');
          input.type = 'text';
          input.placeholder = 'Seu nome para reservar';
          input.style.padding = '8px';
          input.style.borderRadius = '8px';
          input.onblur = function(){ reserveGift(gift.id, this); };
          right.appendChild(input);
        }

        el.appendChild(img);
        el.appendChild(meta);
        el.appendChild(right);

        container.appendChild(el);
      });
    }

    function loginAdmin(){
      const pass = document.getElementById('admin-pass').value;
      if(pass === ADMIN_PASSWORD){
        isAdmin = true;
        document.getElementById('admin-panel').style.display = 'block';
        document.getElementById('btn-logout').style.display = 'inline-block';
        document.getElementById('login-card').style.display = 'none';
        document.getElementById('admin-info').textContent = 'Modo ADMIN';
        renderGifts();
      } else {
        alert('Senha incorreta!');
      }
    }

    function logoutAdmin(){
      isAdmin = false;
      document.getElementById('admin-panel').style.display = 'none';
      document.getElementById('btn-logout').style.display = 'none';
      document.getElementById('login-card').style.display = 'block';
      document.getElementById('admin-pass').value = '';
      document.getElementById('admin-info').textContent = '';
      renderGifts();
    }

    function clearAll(){
      if(!confirm('Tem certeza que deseja limpar todos os itens? Isso não pode ser desfeito.')) return;
      gifts = [];
      saveAndRender();
    }
  </script>
</body>
</html>
